{% extends "base.html" %}


    {% block css %}
        <link rel="stylesheet" href="/media/map_editor/index/styles.css"/>
    {% endblock css %}


    {% block js%}
        <script src="/media/vendor/js/bootstrap.file-input.js"></script>

        <script src="/media/map_editor/index/main_angular.js"></script>
    {% endblock js %}


    {% block content %}

        {# Prueba de mustache #}
        {# <div id="sampleArea"></div> #}

        {% csrf_token %}

        <h1>Tus lugares</h1>

        <div class="element-box" ng-controller="PlacesCtrl">


            <div id="place_form" class="form" ng-controller="PlaceCtrl">

                <div ng-include src="'_/form_alert_box.html'"></div>

                <input type="text" ng-model="place_name" ng-change="validate()"
                placeholder="Nombre del lugar..">
                <button class="btn" ng-click="create()">A침adir lugar</button>
            </div>


            <div class="place element-box" fadey="1000"
                ng-repeat="place in places" ng-controller="PlaceCtrl">


                {# PLANTILLA para cada nombre de place #}
                <div ng-include src="'_/editable_text.html'"></div>


                <div class="maps">

                    <div class="map_form">
                        <div class="form_errors"></div>
                        <!-- Para subir la im치gen del mapa -->
                        <form action={% url "map_editor.views.maps" 'new' %}
                            method="post" enctype="multipart/form-data"
                            target="upload_target">
                            {% csrf_token %}
                            <input type="file" title="Elegir im치gen..">
                        </form>

                        <input type="text" name="map_name" placeholder="Nombre de mapa..">
                        <button class="btn" ng-click="createMap()">A침adir mapa</button>
                    </div>


                    <h4 ng-show="place.maps">Mapas:</h4>

                    <div class="map element-box" ng-repeat="map in place.maps">
                        <span class="map_name">[[map.name]]</span>
                        <div class="action_box">
                            <i class="icon-edit" ng-click="updateMap(map.id)"></i>
                            <i class="icon-remove" ng-click="deleteMap(map.id)"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    {% include "_/uploading_iframe.html" %}


    <!-- PLANTILLAS -->
        {% include "_/editable_text.html" %}

        {% include "_/form_alert_box.html" %}


    {% endblock content %}
