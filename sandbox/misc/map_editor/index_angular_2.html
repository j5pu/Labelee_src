{% extends "base.html" %}


    {% block css %}
        <link rel="stylesheet" href="/media/map_editor/index/styles.css"/>
    {% endblock css %}


    {% block js%}
        <script src="/media/vendor/js/bootstrap.file-input.js"></script>

        <script src="/media/map_editor/index/main_angular.js"></script>
    {% endblock js %}


    {% block content %}

        {# Prueba de mustache #}
        {# <div id="sampleArea"></div> #}

        {% csrf_token %}

        <h1>Tus lugares</h1>


        <!--
            LIST de lugares
        -->
        <list resource="place" list-name="places">

            <!-- Formulario para nuevo lugar -->
            <form ng-controller="ElementCtrl">
                {% csrf_token %}

                <div ng-include src="[[_form_alert_box.html]]"></div>

                <input type="text" ng-model="name" ng-change="validate()"
                placeholder="Nombre del lugar..">
                <button class="btn" ng-click="create()">A침adir lugar</button>
            </form>

            <!-- Cada ELEMENT lugar -->
            <div class="box box-1" fadey="400"
                ng-repeat="place in places" ng-controller="ElementCtrl">

                <!-- Cada nombre de lugar -->
                <div ng-include ng-src="[[_editable_text]]"></div>


                <!--
                    LIST de mapas para cada lugar
                -->
                <div resource="map" class="box box-2" ng-controller="ListCtrl">

                    <!-- Formulario para nuevo mapa (subir im치gen) -->
                    <form ng-controller="ElementCtrl" action={% url "map_editor.views.maps" 'new' %}
                        method="post" enctype="multipart/form-data"
                        target="upload_target"
                    >
                        <input type="file" title="Elegir im치gen..">
                        <input type="text" name="map_name" placeholder="Nombre de mapa..">
                        <button class="btn" ng-click="createMap()">A침adir mapa</button>
                    </form>

                    <h4 ng-show="places.maps">Mapas:</h4>

                    <!-- Cada ELEMENT mapa -->
                    <div class="box box-3" ng-repeat="map in place.maps">
                        <span class="map_name">[[map.name]]</span>
                        <div class="action_box">
                            <i class="icon-edit" ng-click="updateMap(map.id)"></i>
                            <i class="icon-remove" ng-click="deleteMap(map.id)"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    {% include "_/uploading_iframe.html" %}


    <!-- PLANTILLAS -->
        {% include "_/editable_text.html" %}

        {% include "_/form_alert_box.html" %}


    {% endblock content %}
