{% extends "base.html" %}


{% block css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/map_editor/index/styles.css"/>
{% endblock css %}


{% block js %}
    <script src="{{ STATIC_URL }}vendor/bootstrap/bootstrap.file-input.js"></script>

    <script src="{{ STATIC_URL }}js/map_editor/index/main_angular.js"></script>
{% endblock js %}


{% block content %}

    {% csrf_token %}

    <h1>Administración de recintos</h1>

    <div id="enclosures" class="box box-0" ng-controller="EnclosuresCtrl">

        <!--PARA AGREGAR LUGAR -->
        <form>
            <div ng-include src="{{ STATIC_URL }}partials/_form_alert_box.html"></div>

            <input type="text"
                   ng-model="enclosure_name"
                   ng-change="validate()"
                   placeholder="Nombre del recinto..">

            <button class="btn" ng-click="createEnclosure()">Añadir recinto</button>
        </form>

        <!--CADA LUGAR-->
        <div class="enclosure box box-1"
             fadey="1000"
             ng-repeat="enclosure in enclosures"
             ng-controller="EnclosureCtrl">

            <include src="{{ STATIC_URL }}partials/_editable_enclosure.html">

            <!--MAPAS PARA EL LUGAR-->
            <div class="floors box box-2" ng-controller="FloorsCtrl">
                <!--PARA AGREGAR MAPA-->
                <form action=""
                      method="post"
                      enctype="multipart/form-data"
                      target="upload_target">

                    <div class="form_content" ng-hide="sending_img">
                        <input type="file"
                               name="img"
                               title="Elegir imágen..">
                        <input type="text"
                               ng-model="floor_name"
                               placeholder="Nombre de planta..">

                        <button class="btn" ng-click="createFloor()">Añadir planta</button>
                    </div>

                    <div class="ajax_gif" ng-show="sending_img">
                        <img src="{{ STATIC_URL }}img/ajax-loader.gif">
                    </div>

                </form>

                <h4 ng-show="enclosure.floors">Mapas:</h4>

                <!--CADA PLANTA-->
                <div class="floor"
                     fadey="1000"
                     ng-repeat="floor in floors"
                     ng-controller="FloorCtrl">

                    <include src="{{ STATIC_URL }}partials/_editable_floor.html">
                </div>
            </div>
        </div>
    </div>


    {% include "_uploading_iframe.html" %}



    <zippy title="un saludo cualquiera..">
        Hello Ramón!
    </zippy>
{% endblock content %}
