{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/map_editor/edit_map/styles.css"/>
{% endblock css %}

{% block js %}
<script src="{{ STATIC_URL }}js/map_editor/edit_map/events.js"></script>
<script src="{{ STATIC_URL }}js/map_editor/edit_map/map.js"></script>
<script src="{{ STATIC_URL }}js/map_editor/edit_map/paint.js"></script>
<script src="{{ STATIC_URL }}js/map_editor/edit_map/paint_historial.js"></script>
<script src="{{ STATIC_URL }}js/map_editor/edit_map/menu.js"></script>

<script src="{{ STATIC_URL }}js/map_editor/edit_map/main.js"></script>

<script>
	var map_id = "{{ map_id }}";
</script>
{% endblock js %}

{% block content %}

{% csrf_token %}

<!-- Por tema de compatibilidad con appfog -->
{% load url from future %}

<!-- Imagen del mapa -->
<span id="map_src" style="display: none">{{ STATIC_URL }}img/map.jpg</span>

<!-- GRID -->
<div id="grid"> </div>

<!-- MENU -->
<div id="menu" >
	
	<a href="{% url 'map_editor__index' %}">Volver al menú</a>
	<input type="checkbox" name="toggle_border">Ver rejilla


	<div class="box box-0">

		<span class="title">Grid:</span>
		<br>

		<div class="box box-1">
			Filas:
			<input type="text"
			name="num_rows"
			value="20"
			/>

			= <span id="num_blocks"> </span>
		</div>

		<!-- GUARDAR GRID -->
		<div class="box box-1">

			<input type="text" name="grid_name"
			placeholder="Nombre para nuevo grid.."/>

			<button name="create_grid">Guardar</button>
		</div>
	</div>


	<!-- CARGAR GRID -->
	<div class="box box-0">

		<span class="title">Cargar grid:</span>
		<br>

		<select name="grid_selector"></select>

        <button name="update_grid">
            Editar grid
        </button>

		<button name="delete_grid">
			Eliminar grid
		</button>
	</div>

	<!-- SELECCIONAR CATEGORÍA -> OBJETO -->
	<div id="choose-object" class="box box-0">
		<span class="title">Objetos:</span>
		<br>

		<div class="box box-1">
			<span class="title">Elegir objeto:</span>
			<br>

			<div class="box box-2">
				Categoría:
				<br>
				<select name="category"></select>
				<a id="new_category" href=''>Nueva</a>
				<a id="edit_category" href=''>Editar</a>
				<a id="delete_category" href=''>Eliminar</a>
			</div>

			<div class="box box-2">
				Objeto:
				<br>
				<select name="object">
					<option class="prompt_option" value="">Selecc. objeto</option>
				</select>
				<a id="new_object" href=''>Nuevo Objeto</a>
			</div>
		</div>
	</div>

	<!--
	Cajas para crear objeto o categoría
	-->

	<div id="category-form" class="box box-1">

		<span class="title">Crear categoría:</span>
		<br>

		<form action=""
			method="post" enctype="multipart/form-data"
			target="upload_target">
			<input type="text" name="name"
			placeholder="Nombre para la categoría.."/>
			<br>
	
			<!-- Campo para la imágen -->
			Imágen de la categoría:
				<input type="file" name="img" title="Elegir imágen..">
	
			<button name="create">
				Crear
			</button>
		</form>
	</div>

	<div id="object-form" class="box box-1">
		<span class="title">Crear objeto:</span>
		<br>

		<form action=""
		method="post" enctype="multipart/form-data"
		target="upload_target">
			<input type="text" name="name"
			placeholder="Nombre para el objeto.."/>
			<br>
	
			Para la categoría:
			<select name="category">
				<option class="prompt_option" value="">Selecc. categoría</option>
			</select>
	
			<!-- Campo para la imágen -->
			Imágen del objeto:
	
				<input type="file" name="img" title="Elegir imágen..">
	
			<button name="create">
				Crear
			</button>
		</form>
	</div>
</div>

{% include "_uploading_iframe.html" %}

{% endblock content %}