{% extends "base.html" %}

{% load i18n %}

{% block css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/map_editor/styles.css"/>
    <link rel="stylesheet" href="{{ STATIC_URL }}css/map_editor/edit_map/styles.css"/>
    {#    <link rel="stylesheet" media = "print" href="{{ STATIC_URL }}css/map_editor/edit_map/print.css"/>#}

{% endblock css %}

{# prueba cambio#}
{% block js %}
    <script src="{{ STATIC_URL }}vendor/bootstrap/bootstrap.file-input.js"></script>

    <script src="{{ STATIC_URL }}js/map_editor/edit_map/menu.js"></script>
    <script src="{{ STATIC_URL }}js/map_editor/edit_map/painter.js"></script>
    <script src="{{ STATIC_URL }}js/map_editor/edit_map/events.js"></script>
    <script src="{{ STATIC_URL }}js/map_editor/edit_map/floor.js"></script>
    <script src="{{ STATIC_URL }}js/map_editor/edit_map/elements.js"></script>
    <script src="{{ STATIC_URL }}js/map_editor/edit_map/paint_historial.js"></script>

    <script src="{{ STATIC_URL }}js/map_editor/edit_map/main.js"></script>

    <script>
        var floor_id = "{{ floor_id }}";
    </script>
{% endblock js %}

{% block content %}

    {% csrf_token %}

    <!-- GRID PARA EL PLANO DE LA PLANTA -->
    <!--<img src = "/media/img/enclosures/Arista_Prueba/floors/28.jpg" id = "fake"> -->
    <div id="grid"></div>


    <div class="box box-0 alert">
        <ul>
            <li>{% trans "Antes de poner un QR o cambiar la descripción guardar el plano" %}</li>
            <li>{% trans "No aumentar el tamaño de la página" %}</li>
        </ul>
    </div>

    <!--MENU-->
    <div id="menu">
        <div class="box box-0">
            <!-- NUMERO DE FILAS Y GUARDAR FLOOR -->
            <div class="box box-1">
                <span class="num_rows">
                    {% trans "Filas" %}:
                    <input type="text"
                           id="num_rows"
                           value="20">
                    =
                </span>
                <span id="num_blocks"></span>

                <button class="btn" id="update_floor">{% trans "Guardar" %}</button><br>
                <!--<button class="btn" id="clear_floor">{% trans "Limpiar" %}</button>-->

                <a class="link-1" href="{% url 'map_editor.views.index' %}">{% trans "Volver al menú" %}</a>
            </div><br>

            <!-- AUTOMATIC MAP GENERATOR -->
            <div class="box box-1" style="width:280px">
                <p>
                    {% trans "Rango de contraste " %}
                    <img src="{{  STATIC_URL }}img/info.png" title="El selector superior indica el contraste a partir
                    del cual se buscan líneas. El selector inferior indica hasta qué punto se continúa una linea según
                    su contraste.
                    Un valor grande del selector superior resultará en menos líneas pero más precisas en mapas con
                    que presentan ruido como carteles y dibujos.">
                </p>
                <div id="slider_canny" class="slider"></div>
                <p>
                    {% trans "Sensibilidad " %}
                    <img src="{{  STATIC_URL }}img/info.png" title="A mayor sensibilidad, sólo las líneas más fuertes
                    se conservan">
                </p>
                <div id="slider_threshold" class="slider"></div>
                <p>
                    {% trans "Tamaño de línea mínimo " %}
                    <img src="{{  STATIC_URL }}img/info.png" title="A mayor tamaño las líneas más cortas son descartadas">
                </p>
                <div id="slider_line_length" class="slider"></div>
                <p>
                    {% trans "Distancia máxima entre líneas " %}
                    <img src="{{  STATIC_URL }}img/info.png" title="A mayor distancia, líneas cortas pero cercanas se fusionan">
                </p>
                <div id="slider_gap" class="slider"></div><br>

                <button class="btn" id="auto_generate_map">{% trans "Calcular mapa inteligente" %}</button><br>

            </div><br>

            <!-- STATS CHECKBOXES Y QR LIST -->
            <div class="box box-1">
                <div id="puntos" class="box box-2">
                    <h4>{% trans "Puntos" %}:</h4>
                    <ul>
                        <li>
                            <span class="txt">{% trans "Guardados" %}:</span>
                            <span id="num_saved_points" class="num"></span>
                        </li>
                        <li>
                            <span class="txt">{% trans "Por guardar" %}:</span>
                            <span id="num_points_to_save" class="num"></span>
                        </li>
                        <li>
                            <span class="txt">{% trans "Por elminar" %}:</span>
                            <span id="num_points_to_delete" class="num"></span>
                        </li>
                    </ul>
                    <!--Total: <span id="num_total_points"></span> <br>-->
                </div>

                <div class="box box-2">
                    <label class="checkbox">
                        <input type="checkbox" id="toggle_border" checked>{% trans "Ver rejilla" %}
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="toggle_erase_mode">{% trans "Modo borrar" %}<br>
                    </label>
                </div><br>

                <!-- LISTA DE QRs -->
                <div id="qr_list" class="box box-2">
                    <h4>{% trans "Lista de QRs" %}:</h4>
                    <label class="checkbox">
                        <input type="checkbox" id="toggle_qrs">{% trans "Resaltar todos" %}
                    </label>
                    <ul></ul>
                </div>
            </div>
        </div>

        <div class="box box-0">
            <!-- WRAPPER MENU POI-->
            <div class="box box-1">
                <!-- MENU -->
                <div id="poi_menu" class="box box-2">
                    <span class="title">{% trans "Elegir POI" %}:</span>
                    <br>

                    <div id="category" class="box box-2">
                        {% trans "Categoría" %}:
                        <br>
                        <select></select>
                        <a class="new" href=''>{% trans "Nueva" %}</a>
                        <!--<a class="edit" href=''>Editar</a>-->
                        <a class="delete" href=''>{% trans "Eliminar" %}</a>
                    </div><br>

                    <div id="label" class="box box-2">
                        POI:
                        <br>
                        <select></select>
                        <a class="new" href=''>{% trans "Nuevo" %}</a>
                        <!--<a class="edit" href=''>Editar</a>-->
                        <a class="delete" href=''>{% trans "Eliminar" %}</a>
                    </div>
                </div>

                <!--
                    Cajas para crear objeto o categoría
                -->
                <div id="category-form" class="box box-2">

                    <span class="title">{% trans "Crear categoría" %}:</span>
                    <br>

                    <form action=""
                          method="post"
                          enctype="multipart/form-data"
                          target="upload_target">
                        <input type="text" name="name"
                               placeholder="{% trans "Nombre para la categoría" %}.."/>
                        <br>

                        <!-- Campo para la imágen -->
                        <input class="btn"
                               type="file"
                               name="img"
                               title="{% trans "Elegir icono" %}..">
                        <br>

                        {% trans "Color de bloque" %}:
                        <input type="text" name="color"
                               placeholder="{% trans "Color" %}.."/>
                        <br>

                        <button name="create">{% trans "Crear" %}</button>
                        <button name="cancel">{% trans "Cancelar" %}</button>
                    </form>
                </div>

                <div id="label-form" class="box box-2">
                    <span class="title">{% trans "Crear POI" %}:</span>
                    <br>

                    <form action=""
                          method="post" enctype="multipart/form-data"
                          target="upload_target">
                        <input type="text" name="name"
                               placeholder="{% trans "Nombre para el POI" %}.."/><br>

                        {% trans "Para la categoría" %}:
                        <select></select><br>

                        {% trans "Imágen para el POI" %}:
                        <input class="btn"
                               type="file"
                               name="img"
                               title="{% trans "Elegir imagen" %}.."><br>

                        <button name="create">{% trans "Crear" %}</button>
                        <button name="cancel">{% trans "Cancelar" %}</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div id="loadingScreen"></div>

    {% include "_uploading_iframe.html" %}

{% endblock content %}